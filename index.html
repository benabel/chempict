<!DOCTYPE html>

<head>
  <meta http-equiv="X-UA-Compatible"
    content="chrome=1">
  <link rel="stylesheet"
    href="http://hub.chemdoodle.com/cwc/latest/ChemDoodleWeb.css"
    type="text/css">
  <script type="text/javascript"
    src="http://hub.chemdoodle.com/cwc/latest/ChemDoodleWeb.js"></script>
<script type="text/javascript"
    src="./dist/chempict.min.js"></script>
</head>

<body>
  <script>
  var viewACS = new ChemDoodle.ViewerCanvas('viewACS', 100, 100);
  viewACS.specs.bonds_width_2D = .6;
  viewACS.specs.bonds_saturationWidth_2D = .18;
  viewACS.specs.bonds_hashSpacing_2D = 2.5;
  viewACS.specs.atoms_font_size_2D = 10;
  viewACS.specs.atoms_font_families_2D = ['Helvetica', 'Arial', 'sans-serif'];
  viewACS.specs.atoms_displayTerminalCarbonLabels_2D = true;
  var caffeineMolFile =
    'Molecule Name\n  CHEMDOOD08070920033D 0   0.00000     0.00000     0\n[Insert Comment Here]\n 14 15  0  0  0  0  0  0  0  0  1 V2000\n   -0.3318    2.0000    0.0000   O 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318    1.0000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -1.1980    0.5000    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    0.5342    0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -1.1980   -0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -2.0640    1.0000    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n    1.4804    0.8047    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    0.5342   -0.5000    0.0000   C 0  0  0  1  0  0  0  0  0  0  0  0\n   -2.0640   -1.0000    0.0000   O 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318   -1.0000    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n    2.0640   -0.0000    0.0000   C 0  0  0  2  0  0  0  0  0  0  0  0\n    1.7910    1.7553    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n    1.4804   -0.8047    0.0000   N 0  0  0  1  0  0  0  0  0  0  0  0\n   -0.3318   -2.0000    0.0000   C 0  0  0  4  0  0  0  0  0  0  0  0\n  1  2  2  0  0  0  0\n  3  2  1  0  0  0  0\n  4  2  1  0  0  0  0\n  3  5  1  0  0  0  0\n  3  6  1  0  0  0  0\n  7  4  1  0  0  0  0\n  4  8  2  0  0  0  0\n  9  5  2  0  0  0  0\n 10  5  1  0  0  0  0\n 10  8  1  0  0  0  0\n  7 11  1  0  0  0  0\n  7 12  1  0  0  0  0\n 13  8  1  0  0  0  0\n 13 11  2  0  0  0  0\n 10 14  1  0  0  0  0\nM  END\n> <DATE>\n07-08-2009\n';
  var caffeine = ChemDoodle.readMOL(caffeineMolFile);
  caffeine.scaleToAverageBondLength(14.4);
  viewACS.loadMolecule(caffeine);
  </script>
  <h1>Load a json produced by chempict</h1>
  <script>
  var smi = 'N[C@@H](CCC(=O)N[C@@H](CSSC[C@H](NC(=O)CC[C@H](N)C(O)=O)C(=O)NCC(O)=O)C(=O)NCC(O)=O)C(O)=O';
  var mol = ChemPict.SmilesParser.parse(smi);
  ChemPict.CoordinateGenerator.generate(mol);
  var json = ChemPict.WriteChemdoodleJson(mol).toJson();
  var jsonfile = JSON.parse(json);
  //var dummy = new ChemDoodle.io.JSONInterpreter().molFrom(caffeineMolFile);
  //console.log(dummy);
  // this line reconstructs the Molecule data structure from the JSON object
  //var reconstructed = new ChemDoodle.io.JSONInterpreter().molFrom(dummy);
  var viewJSON = new ChemDoodle.ViewerCanvas('viewJSON', 100, 100);
  // var jsonfile = JSON.parse(
  //   '{"m":[{"a":[{"I":"C","x":-3.897114317029975,"y":3.750000000000006,"c":0},{"I":"C","x":-2.598076211353315,"y":4.500000000000003,"c":0},{"I":"O","x":-2.5980762113533125,"y":6.000000000000003,"c":0},{"I":"O","x":-1.2990381056766582,"y":3.7500000000000004,"c":0},{"I":"C","x":-1.2990381056766582,"y":2.2500000000000004,"c":0},{"I":"C","x":-2.5980762113533165,"y":1.5,"c":0},{"I":"C","x":-2.598076211353316,"y":-2.220446049250313e-16,"c":0},{"I":"C","x":-1.2990381056766584,"y":-0.7500000000000001,"c":0},{"I":"C","x":0,"y":0,"c":0},{"I":"C","x":0,"y":1.5,"c":0},{"I":"C","x":1.2990381056766584,"y":2.249999999999999,"c":0},{"I":"O","x":2.598076211353315,"y":1.4999999999999973,"c":0},{"I":"O","x":1.2990381056766598,"y":3.749999999999999,"c":0}],"b":[{"b":0,"e":1,"o":1},{"b":1,"e":2,"o":2},{"b":1,"e":3,"o":1},{"b":3,"e":4,"o":1},{"b":4,"e":5,"o":2},{"b":5,"e":6,"o":1},{"b":6,"e":7,"o":2},{"b":7,"e":8,"o":1},{"b":8,"e":9,"o":2},{"b":9,"e":4,"o":1},{"b":9,"e":10,"o":1},{"b":10,"e":11,"o":2},{"b":10,"e":12,"o":1}]}],"s":[]}'
  // );
  // this line reconstructs the Molecule data structure from the JSON object
  var reconstructed = new ChemDoodle.io.JSONInterpreter().molFrom(jsonfile.m[0]);
  reconstructed.scaleToAverageBondLength(14.4);
  viewJSON.loadMolecule(reconstructed);
  </script>
</body>
