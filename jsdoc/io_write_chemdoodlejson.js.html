<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: io/write_chemdoodlejson.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: io/write_chemdoodlejson.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';


/** Class for the chemdoodle json writer. */
class ChemJsonWriter {
  /**
   * constructor - Create a json string from a molecule model
   *
   * @param  {modelMolecule} mol - Molecule model to convert
   */
  constructor(mol) { this.molObj = this.processMolecule(mol); }

  /**
   * convert ModelAtom to a js object
   */
  processAtom(atom) {
    let a = {};
    let coord = atom.coord;
    a.l = atom.symbol;
    a.x = coord.x;
    a.y = coord.y;
    a.c = atom.charge;
    return a;
  }

  /**
   * convert ModelBond from a molecule to a js object
   */
  processBond(bond, molecule) {
    let b = {};
    let atom1 = bond.source;
    let atom2 = bond.target;
    b.b = molecule.indexOfAtom(atom1);
    b.e = molecule.indexOfAtom(atom2);
    b.o = bond.order;
    switch (bond.stereo) {
      case 10:
        b.s = 'none';
        break;
      case 11:
        b.s = 'protuding';
        break;
      case 12:
        b.s = 'ambiguous';
        break;
      case 13:
        b.s = 'recessed';
        break;
      default:
        b.s = 'none';
    }
    return b;
  }

  /**
   * convert ModelMolecule to chemdoodle JSON
   */
  processMolecule(molecule) {
    let obj = {};
    let mols = [];
    let mol = {};
    const atoms = molecule.atoms;
    const bonds = molecule.bonds;
    mol.a = atoms.map(this.processAtom);
    mol.b = [];
    for (let i = 0; i &lt; bonds.length; i++) {
      mol.b.push(this.processBond(bonds[i], molecule));
    }

    mols[0] = mol;
    obj.m = mols;
    obj.s = [];
    return obj;
  }
  /**
   * return the chemdoodle JSON string
   */
  toJson() { return JSON.stringify(this.molObj); }
}

module.exports = ChemJsonWriter;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ChemJsonWriter.html">ChemJsonWriter</a></li><li><a href="MathBox.html">MathBox</a></li><li><a href="MathCoordinate.html">MathCoordinate</a></li><li><a href="ModelAtom.html">ModelAtom</a></li><li><a href="ModelBond.html">ModelBond</a></li><li><a href="ModelMolecule.html">ModelMolecule</a></li><li><a href="RingPathEdge.html">RingPathEdge</a></li><li><a href="RingPathGraph.html">RingPathGraph</a></li><li><a href="RingRing.html">RingRing</a></li></ul><h3>Global</h3><ul><li><a href="global.html#layoutAtomPlacer">layoutAtomPlacer</a></li><li><a href="global.html#layoutCoordinateGenerator">layoutCoordinateGenerator</a></li><li><a href="global.html#MathVector2D">MathVector2D</a></li><li><a href="global.html#ringHanser">ringHanser</a></li><li><a href="global.html#ringSSSR">ringSSSR</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Mar 22 2016 09:17:28 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
